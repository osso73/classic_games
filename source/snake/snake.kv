#:set COLOUR_IMAGE [1, 1, 1, 1]
#:set COLOUR_SNAKE [140/255, 198/255, 62/255, 1]

<MainScreen>:
    orientation: 'vertical'

    BoxLayout:
        size_hint_y: None
        height: '40sp'
        padding: sp(5)
        spacing: sp(5)
        canvas:
            Color:
                rgba: 1, 0, 0, 0.2
            Rectangle:
                size: self.size
                pos: self.pos

        MenuButton:
            text: 'Start'
            on_press: game.start_game()

        MenuButton:
            text: 'Size: ' + str(game.size_snake)
            on_press: game.button_size()

        MenuButton:
            text: 'Speed: ' + str(game.speed_factor)
            on_press: game.button_speed()

        Label:

        MenuButtonSmall:
            image: 'icons/mute_off.png', 'icons/mute_on.png'
            on_release: game.mute = not game.mute


        MenuButtonSmall:
            image: 'icons/pause.png', 'icons/play.png'
            on_release: game.pause = not game.pause
                            

        MenuButtonSmall:
            image: 'icons/help.png', 'icons/help.png'
            on_release: root.help()


        MenuButtonSmall:
            image: 'icons/power.png', 'icons/power.png'
            on_release:
                game.bye()
                app.stop()


    GridLayout:
        cols: 3
        on_size: game.set_size()
        canvas:
            Color:
                rgba: 0, 1, 1, 0.2
            Rectangle:
                size: self.size
                pos: self.pos

        Label:
        Label:
            text: 'Score: ' + str(game.score)
            font_size: '36sp'


        Label:

        Label:
        GameBoard:
            id: game
            size_hint: None, None
            canvas.before:
                Color:
                    rgba: 250/255, 248/255, 239/255, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
        Label:

        Label:
        Label:
        Label:


########################### Snake parts #####################################

<GridElement>:
    size_pixels: app.root.ids.game.size_pixels
    grid: app.root.ids.game.size_grid
    size: self.size_pixels, self.size_pixels


<SnakePart>:
    canvas.before:
        Color:
            rgba: COLOUR_IMAGE if self.image else COLOUR_SNAKE
        Rectangle:
            source: self.image
            pos: self.pos
            size: self.size

<SnakeHead>:
    colour: COLOUR_IMAGE
    canvas.before:
        Color:
            rgba: self.colour
        Rectangle:
            source: self.image
            pos: self.pos
            size: self.size

############################## Food ########################################
<Food>:
    canvas.before:
        Color:
            rgba: COLOUR_IMAGE
        Rectangle:
            source: self.image
            pos: self.pos
            size: self.size


############################## Food ########################################
<Wall>:
    canvas.before:
        Color:
            rgba: COLOUR_IMAGE
        Rectangle:
            source: 'images/wall.jpg'
            pos: self.pos
            size: self.size

############################## Popup ########################################
<PopupWin>
    size_hint: None, None

<PopupMsg>
    padding: sp(20), sp(20)
    font_size: '20sp'
    size_hint_x: None
    size: self.texture_size

############################## Menu ########################################

<MenuButton>:
    font_size: '18sp'
    size_hint_x: None
    size: self.texture_size
    padding: sp(5), sp(5)

<MenuButtonSmall>:
    size_hint_x: None
    width: self.parent.height * 0.8
    padding: sp(10), sp(10)
    canvas:
        Rectangle:
            source: self.image[0]
            size: self.size
            pos: self.pos
    on_press: self.image = self.image[1], self.image[0]
